# 파일 전송 프로토콜

### FTP

- 네트워크를 통해 파일을 주고받기 위해 만들어진 오래된 프로토콜
- 인테넷 초창기부터 사용
- 개발자가 자신의 컴퓨터에 FTP 클라이언트 프로그램을 설치한 후 웹 호스팅 업체 서버에 접속해 파일을 업로드, 다운로드 가능
- **파일 전송 & 서버에 저장된 파일 관리**
    - 원격 서버의 파일 및 디렉터리 목록 확인, 삭제, 이름 변경, 파일 접근 권한 변경 등의 작업 가능
- **파일질라**
    - 대표적인 FTP 클라이언트 프로그램
    - 왼쪽: 로컬 컴퓨터의 파일 시스템
    - 오른쪽: 접속한 원격 서버의 파일 시스템
    - 사용자가 드래그 앤 드롭으로 손쉽게 파일 전송
- **제어 연결 포트(21번)**
    - 제어 명령을 주고받을 때 사용하는 포트
    - 데이터 전송이 아닌 지시나 상태 확인 명령 주고 받을 시 사용
- **데이터 연결 포트(20번 또는 동적 포트)**
    - 실제 파일을 전송하기 위해 사용하는 포트
    - **액티브 모드**
        - 서버가 클라이언트에 데이터 연결 설정
        - 20번 사용
    - **패시브 모드**
        - 클라이언트가 서버에 데이터 연결 설정
        - 동적 포트 사용
- 사용 초기 → 액티브 모드 이용
- 클라이언트 측 방화벽 문제로 패시브 모드 주로 사용
- 보안상의 이유로 잘 사용하지 않음
- 텔넷과 같이 통신 데이터를 암호화하지 않고 전송
- 보안 문제 해결 → SFTP 등장

### SFTP

- 보안이 강화된 파일 전송 프로토콜
- 클라이언트와 서버 간에 주고받는 모든 데이터를 암호화해 전송
- **SSH**로 클라이언트와 서버를 연결 → 두 시스템 간에 암호화된 통신 보안 채널을 통해 데이터 전송
- SSH 프로토콜 위에서 동작하는 서브 시스템
- 별도의 포트 번호 없이 SSH와 동일한 TCP 22번 포트 사용
- **SSH를 통해 안전하게 파일을 전송하는 프로토콜**

### TFTP

- 기본 기능만 제공하도록 단순화한 파일 전송 프로토콜
- 간단한 파일을 주고받을 때 사용
- 기본 전송 기능만 제공하므로 프로토콜 자체가 가볍고 구현하기 간단
- FTP, SFTP와 비교해 기능적으로 제약 많음
- 사용자를 인증하는 절차가 없고 원격 서버의 디렉터리 내용 탐색, 파일 목록 조회 불가능
- 부가적인 파일 관리 기능 미지원
- 클라이언트가 특정 파일을 업로드하거나 다운로드하려면 해당 파일의 정확한 경로와 파일 이름을 알고 직접 입력 → TFTP로 파일 전송
- 일반적인 파일 공유에는 적합하지 않음
- 서버와 클라이언트가 자동으로 파일을 주고 받는 특수한 환경에서 많이 사용
    - 네트워크 부팅, 네트워크 장비의 펌웨어 업데이트, 구성 파일 백업, 또는 복원 시 사용
- 전송 계층 UDP 69번 포트 사용
- 데이터의 신뢰성 저하

### 정리

| **이름** | **설명** | **전송 계층** | **포트 번호** |
| --- | --- | --- | --- |
| FTP | 원격 서버에 접속해 파일을 업로드 및 다운로드 | TCP | 21번 서버 측 제어 연결용
20번 또는 동적 포트 서버 측 데이터 연결용 |
| SFTP | SSH 기반으로 원격서버에 접속해 파일을 업로드 및 다운로드 | TCP | 22번 서버 |
| TFTP | 원격 서버에 접속해 파일을 업로드 및 다운로드, 단순 파일 전송 기능만 제공 | UDP | 69번 서버 |